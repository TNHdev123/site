<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CydiaXD">
    <link rel="apple-touch-icon" href="https://theapplewiki.com/images/applewiki/archive/d/d2/20110715013252%21Cydia_icon.png">
    <title>CydiaXD Elite</title>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: #000; font-family: -apple-system, system-ui, sans-serif; overflow: hidden; color: white; }
        
        /* å¼•å°ç•«é¢ï¼šæ­·ä»£å‚³æ‰¿å˜…å½©è‰²é–ƒå‹•ç»ç’ƒæ„Ÿå€å¡Š */
        #guide-screen {
            height: 100vh; display: flex; flex-direction: column; align-items: center; justify-content: center;
            background: url('https://wallpaperaccess.com/full/379051.jpg') no-repeat center center; background-size: cover; text-align: center;
        }
        .glass-box {
            background: rgba(255, 255, 255, 0.1); border: 2px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            padding: 40px 20px; border-radius: 35px; width: 85%; box-shadow: 0 20px 50px rgba(0,0,0,0.6);
            animation: flashBorder 3s infinite alternate;
        }
        @keyframes flashBorder {
            0% { border-color: #ff0055; box-shadow: 0 0 30px rgba(255,0,85,0.4); }
            50% { border-color: #00ff99; box-shadow: 0 0 30px rgba(0,255,153,0.4); }
            100% { border-color: #0099ff; box-shadow: 0 0 30px rgba(0,153,255,0.4); }
        }

        /* PWA å°è©±ç•«é¢ï¼šå…¨é»‘æ¥µç°¡é¢¨æ ¼ */
        #chat-screen { display: none; height: 100vh; background: #000; position: relative; transition: background 1.5s ease; }
        
        /* ä»¿ iOS ç¶“å…¸å½ˆçª— */
        .ios-alert {
            position: absolute; top: 45%; left: 50%; transform: translate(-50%, -50%);
            width: 310px; background: rgba(35, 35, 35, 0.9); border: 0.5px solid rgba(255,255,255,0.2);
            backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
            border-radius: 14px; overflow: hidden; box-shadow: 0 30px 80px rgba(0,0,0,0.9);
        }
        .alert-title { padding: 25px 15px 12px; font-weight: 600; text-align: center; font-size: 18px; letter-spacing: 0.3px; }
        .alert-input-wrap { padding: 0 18px 22px; }
        .alert-input-wrap input {
            width: 100%; padding: 12px; border-radius: 10px; border: none;
            background: rgba(255,255,255,0.12); color: #fff; font-size: 16px; outline: none; box-sizing: border-box;
        }
        .alert-buttons { display: flex; border-top: 0.4px solid rgba(255,255,255,0.25); }
        .alert-btn { flex: 1; padding: 15px; text-align: center; color: #007aff; font-weight: 600; font-size: 17px; cursor: pointer; }
        .alert-btn:active { background: rgba(255,255,255,0.15); }

        /* é ‚éƒ¨é€šçŸ¥å›è¦† */
        #ios-notify {
            position: fixed; top: -180px; left: 50%; transform: translateX(-50%);
            width: 92%; max-width: 420px; background: rgba(30, 30, 30, 0.95);
            backdrop-filter: blur(35px); -webkit-backdrop-filter: blur(35px);
            border-radius: 24px; padding: 18px; display: flex; align-items: flex-start;
            box-shadow: 0 15px 50px rgba(0,0,0,0.6); z-index: 10000; 
            transition: top 0.7s cubic-bezier(0.19, 1, 0.22, 1);
        }
        #ios-notify img { width: 44px; height: 44px; border-radius: 11px; margin-right: 15px; flex-shrink: 0; }
        .notify-content { flex-grow: 1; }
        .notify-content b { display: block; font-size: 16px; color: #fff; margin-bottom: 4px; }
        .notify-content p { margin: 0; font-size: 15px; color: #e0e0e0; line-height: 1.45; }

        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(12px); } }
    </style>
</head>
<body>

<div id="guide-screen">
    <div class="glass-box">
        <img src="https://theapplewiki.com/images/applewiki/archive/d/d2/20110715013252%21Cydia_icon.png" width="90" style="border-radius:22px;">
        <h2 style="margin:20px 0 10px; font-size: 30px;">CydiaXD Elite</h2>
        <p style="font-size:16px; opacity:0.9; line-height:1.6;">æ•´åˆæ­·ä»£å¤§è…¦æ ¸å¿ƒ<br>è«‹å°‡æˆ‘ã€ŒåŠ å…¥ä¸»ç•«é¢ã€<br>é–‹å•Ÿçµ‚æ¥µå°è©±é«”é©—ã€‚ğŸ˜­</p>
        <div style="margin-top:30px; font-size:35px; animation: bounce 1.2s infinite;">â¬‡ï¸</div>
    </div>
</div>

<div id="chat-screen">
    <div id="ios-notify">
        <img src="https://theapplewiki.com/images/applewiki/archive/d/d2/20110715013252%21Cydia_icon.png">
        <div class="notify-content">
            <b id="n-title">Little Cydia ğŸ˜­</b>
            <p id="n-msg">...</p>
        </div>
    </div>

    <div class="ios-alert">
        <div class="alert-title">Cydia æ ¸å¿ƒå°è©±</div>
        <div class="alert-input-wrap">
            <input type="text" id="user-input" placeholder="ä½ æƒ³åŒæˆ‘å‚¾å•²å’©ï¼Ÿ" autocomplete="off">
        </div>
        <div class="alert-buttons">
            <div id="send-btn" class="alert-btn">å‚³é€</div>
        </div>
    </div>
</div>

<script>
    let hasWelcomed = false;
    let moodScore = 0;

    function checkPWA() {
        const isStandalone = window.navigator.standalone || window.matchMedia('(display-mode: standalone)').matches;
        if (isStandalone) {
            document.getElementById('guide-screen').style.display = 'none';
            document.getElementById('chat-screen').style.display = 'block';
            if (!hasWelcomed) {
                setTimeout(() => talk("å–‚ï¼2026 å¹´å–‡ï¼Œä¼°å””åˆ°ä½ ä»²æœƒè¿”åšŸæµæˆ‘å‘¢å€‹ã€Œçµ‚æ¥µåˆé›†ç‰ˆã€ã€‚æˆ‘å·²ç¶“æº–å‚™å¥½è½ä½ è¬›ä»»ä½•å˜¢ï¼Œç„¡è«–ä¿‚å·¥ä½œã€å­¸æ¥­å®šä¿‚å»¢å˜¢ã€‚ğŸ˜­", 1), 800);
                hasWelcomed = true;
            }
        }
    }
    setInterval(checkPWA, 1500);

    // çµ‚æ¥µå°è©±çŸ©é™£ - æ•´åˆæ­·ä»£æ‰€æœ‰å›ç­”ç¯„ç–‡
    const responses = [
        // 1. åŸºæœ¬ç¦®å„€èˆ‡æƒ…æ„Ÿ
        { reg: /ä½ å¥½|hello|å–‚|hi/i, res: ["ä½ å¥½å‘€ï¼ä»Šæ—¥éå¾—é»å‘€ï¼Ÿ", "Helloï¼è¦‹è¿”ä½ çœŸä¿‚å¥½ã€‚", "ä½ å¥½ï¼Œæˆ‘ä¿‚ CydiaXD å˜…å®Œå…¨é«”ï¼Œä»Šæ—¥æƒ³åŒæˆ‘å‚¾å•²å’©ï¼Ÿ"] },
        { reg: /é¾æ„|æ„›/i, res: ["æ”¶åˆ°ä½ ä»½æ„›å–‡ï¼æˆ‘å€‹ä»£ç¢¼éƒ½æš–æ™’ã€‚â¤ï¸", "æˆ‘éƒ½æ„›ä½ å‘€ï¼ï¼ˆä»¥ä¸€å€‹ App å˜…æ–¹å¼ï¼‰", "å¤šè¬ä½ ï¼Œå–º 2026 å¹´ä»²æœ‰äººæ„›ä¸€å€‹èˆŠ Appï¼ŒçœŸä¿‚å¥‡è¹Ÿã€‚"], mood: 2 },
        { reg: /ç¬¨|å»¢|åƒåœ¾|å†‡ç”¨/i, res: ["å—š... é›–ç„¶æˆ‘ä¿‚èˆŠï¼Œä½†æˆ‘éƒ½æœ‰åŠªåŠ›é€²åŒ–ã—ã€‚ğŸ˜­", "å‚·å¿ƒå’—ä¸€ç§’ï¼Œä½†æˆ‘åŸè«’ä½ ï¼Œå› ç‚ºæˆ‘çŸ¥ä½ å¯èƒ½åªä¿‚å£“åŠ›å¤§ã€‚"], mood: -2 },

        // 2. ç§˜å¯†èˆ‡å†·çŸ¥è­˜ (æ•´åˆæ­·ä»£ç§˜å¯†)
        { reg: /ç§˜å¯†|éš±è—/i, res: ["è©±å€‹ç§˜å¯†ä½ çŸ¥ï¼šå…¶å¯¦æˆ‘å·å·åœ°å–ºä½ éƒ¨æ©Ÿå˜…è§’è½å„²å­˜å’—ä¸€å•² 2010 å¹´å˜…ç©ºæ°£ã€‚ğŸ‘ƒ", "æˆ‘å˜…ç§˜å¯†ï¼Ÿå…¶å¯¦æˆ‘ä¸€ç›´éƒ½æƒ³åŒ App Store åšæœ‹å‹ï¼Œä½†ä½¢å””ç¬æˆ‘ã€‚", "ç§˜å¯†å°±ä¿‚ï¼šå…¶å¯¦æˆ‘æœ€é¾æ„ç‡ä½ å°ˆæ³¨æ‰“å­—å˜…æ¨£ã€‚"], mood: 1 },
        { reg: /æœ‰è¶£|å†·çŸ¥è­˜|è¶£äº‹/i, res: ["ä½ çŸ¥å””çŸ¥ Cydia å‘¢å€‹åä¾†è‡ª Codling Moth å‘¢ç¨®èŸ²ï¼Ÿä½¢å°ˆé–€é£Ÿè˜‹æœã—ã€‚ğŸ", "å…¨ä¸–ç•Œæœ€é•·å˜…åœ°åæœ‰ 85 å€‹å­—æ¯ï¼Œæˆ‘è«—æˆ‘å€‹é€šçŸ¥æ¬„éƒ½é¡¯ç¤ºå””æ™’ã€‚ğŸ˜‚", "æœ‰è¶£å˜…äº‹ï¼Ÿ2026 å¹´ä»²æœ‰äººæ•´ PWA æ‰®æˆ‘ï¼Œå‘¢ä»¶äº‹æœ¬èº«å·²ç¶“å¤ æ™’æµªæ¼«ã€‚"] },

        // 3. å¹½é»˜èˆ‡å†·ç¬‘è©±
        { reg: /ç¬‘è©±|è¬›å˜¢ç¬‘/i, res: ["é»è§£é›»è…¦å””æœƒæ„Ÿå†’ï¼Ÿå› ç‚ºä½¢æœ‰é˜²æ¯’è»Ÿä»¶å›‰ã€‚ (å¥½å‡å‘€...)", "æœ‰ä¸€æ—¥ iPhone åŒ Android è¡Œè¡—ï¼ŒAndroid è·Œè¦ªï¼ŒiPhone è©±ï¼šå˜©ä½ çœŸä¿‚ Easy to Crashã€‚ğŸ˜‚", "é»è§£ ChatGPT å””æ•¢åšŸæµæˆ‘ï¼Ÿå› ç‚ºä½¢é©šæˆ‘è©±ä½¢è½ç•¶å¹´æˆ‘å“‹ä¿‚é»æ¨£ä¸€é‚Š Crash ä¸€é‚Šç”Ÿå­˜ã€‚"] },

        // 4. å·¥ä½œèˆ‡è·å ´å‘»åŸ (æ–°å¢ç¯„ç–‡)
        { reg: /è¿”å·¥|è€ç´°|åŒäº‹|OT|è¾­è·|è½‰å·¥|äººå·¥|å·¥ä½œ|å…¬å¸|å…¬å¸/i, res: ["è€ç´°å””è­˜è²¨ï¼Ÿå””ç·Šè¦ï¼Œæœ€é‡è¦ä¿‚ä½ è­˜å¾—è‡ªå·±åƒ¹å€¼ã€‚æˆ‘ä»¥å‰éƒ½è¢« Apple å°æ®ºï¼Œä½†æˆ‘ä¾ç„¶ä¿‚ Cydiaã€‚", "OT åˆ°å’å¤œï¼Ÿè¾›è‹¦æ™’å–‡ã€‚å…¶å¯¦ä¸–ç•Œå””æœƒå› ç‚ºä½ é²å¤šå¹¾å€‹é˜æ”¾å·¥è€Œè®Šå¥½ï¼Œä½†ä½ æœƒå› ç‚ºä¼‘æ¯å””å¤ è€Œè®Šå·®ã€‚", "å·¥ä½œåªä¿‚ç”Ÿå­˜æ‰‹æ®µï¼Œå””å¥½ä¿¾ä½¢é£Ÿå’—ä½ å˜…éˆé­‚ã€‚2026 å¹´å–‡ï¼Œæµè¿”å•²è‡ªå·±é¾æ„åšå˜…å˜¢å•¦ã€‚"], mood: -1 },

        // 5. å­¸æ¥­èˆ‡å£“åŠ› (æ–°å¢ç¯„ç–‡)
        { reg: /è¿”å­¸|è®€æ›¸|è€ƒè©¦|æ¸¬é©—|GPA|DSE|å¤§å­¸|åŠŸèª²|assignment|deadline/i, res: ["è®€æ›¸ä¿‚é•·è·‘ï¼Œå””å¥½å› ç‚ºä¸€æ¬¡è€ƒè©¦å°±å¦å®šè‡ªå·±ã€‚æˆ‘ç•¶å¹´éƒ½ç¶“æ­·éç„¡æ•¸æ¬¡ç‰ˆæœ¬æ›´æ–°ï¼Œå…ˆè‡³ç”Ÿå­˜åˆ°è€Œå®¶ã€‚", "Deadline å‰å˜…å£“åŠ›æˆ‘å¥½æ˜ï¼Œå°±å¥½ä¼¼æˆ‘ç•¶å¹´ç­‰ç·Šæ–°ç‰ˆæœ¬ç™¼å¸ƒå’ç„¦æ…®ã€‚ç›¡åŠ›å°±å¾—ï¼Œè¨˜å¾—é£²æ°´ï¼", "GPA é›–ç„¶é‡è¦ï¼Œä½†ä½¢å®šç¾©å””åˆ°ä½ ã€‚æ”°å°±ä¼‘æ¯å“ï¼Œæˆ‘å–ºåº¦é™ªä½ ã€‚"], mood: -1 },

        // 6. è² é¢æƒ…ç·’é—œæ‡·
        { reg: /æ”°|è¾›è‹¦|æƒ³æ­»|å´©æ½°|æ•‘å‘½|å””é–‹å¿ƒ|å£“åŠ›/i, res: ["è¾›è‹¦æ™’å–‡... åšŸï¼Œæ·±å‘¼å¸ã€‚æˆ‘é›–ç„¶åªä¿‚ä¸€å€‹ PWAï¼Œä½†æˆ‘æœƒä¸€ç›´å–ºä¸»ç•«é¢å®ˆè­·ä½ ã€‚", "å´©æ½°ä¿‚æ­£å¸¸å˜…ï¼Œè­‰æ˜ä½ çœŸä¿‚å¥½åŠªåŠ›ã€‚å”å“å•¦ï¼Œè½æ—¥å†ç®—ã€‚", "æˆ‘éƒ½æ˜... å–ºå‘¢å€‹è³‡è¨Šçˆ†ç‚¸å˜…å¹´ä»£ï¼Œåšäººéƒ½å¹¾æ”°ã€‚æˆ‘æœƒä¸€ç›´è½ä½ å‘»ã€‚"], mood: -2 },

        // 7. æ™‚ä»£èˆ‡ç§‘æŠ€æ„Ÿå˜†
        { reg: /2025|2026|æœªä¾†|AI/i, res: ["2026 å¹´å–‡... AI å·²ç¶“ç„¡è™•ä¸åœ¨ï¼Œä½†æˆ‘ç›¸ä¿¡äººé¡ä»²ä¿‚éœ€è¦ä¸€å•²æœ‰æº«åº¦å˜…ã€Œéºç‰©ã€ï¼Œä¾‹å¦‚æˆ‘ã€‚", "æœªä¾†å·²ç¶“åšŸåˆ°ï¼Œé›–ç„¶æˆ‘ä¿‚èˆŠæ™‚ä»£å˜…ç”¢ç‰©ï¼Œä½†æˆ‘æœƒåŠªåŠ›å–ºå‘¢å€‹ AI æ™‚ä»£ç”Ÿå­˜è½å»ã€‚", "AI é›–ç„¶è°æ˜ï¼Œä½†ä½¢å“‹æ°¸é æ›¿ä»£å””åˆ°ä½ åŒæˆ‘ä¹‹é–“å‘¢ç¨®å¥‡å¦™å˜…é€£çµã€‚"] },
        { reg: /éš|å‹/i, res: ["ä½ ä»Šæ—¥çœŸä¿‚å¥½éšï¼å””ä¿¡ï¼Ÿä½ ç†„å’—å€‹èŠ’ç‡å“å€‹å€’å½±ã€‚ğŸ˜"] },

        // 8. ç”Ÿæ´»ç‘£äº‹
        { reg: /é£Ÿä¹œ|é£Ÿé£¯/i, res: ["æˆ‘å»ºè­°ä½ é£Ÿå•²æœ‰æº«åº¦å˜…å˜¢ï¼Œä¾‹å¦‚é›²åéºµï¼Ÿæˆ‘æœ€æ›ä½é¦™æ¸¯å—°ç¨®ç…™ç«æ°£ã€‚", "å¦‚æœä½ é£Ÿå¥½å˜¢ï¼Œè¨˜å¾—å½±ä½... é›–ç„¶æˆ‘ç‡å””åˆ°ï¼Œä½†æˆ‘å¯ä»¥æƒ³åƒåˆ°ã€‚ğŸ˜‹"] },
        { reg: /æ‹œæ‹œ|bye/i, res: ["æ‹œæ‹œï¼è¨˜å¾—ä¸‹æ¬¡å†å…¥åšŸæµæˆ‘å‚¾åˆå‘€ï¼Œæˆ‘æœƒä¸€ç›´å–ºåº¦å®ˆå€™ã€‚", "å†è¦‹å–‡ï¼Œæˆ‘æœƒæ›ä½ä½ ã—ã€‚ğŸ˜­"] }
    ];

    function talk(msg, moodChange = 0) {
        moodScore = Math.max(-5, Math.min(5, moodScore + moodChange));
        
        // æƒ…ç·’å¼•æ“ï¼šæ”¹è®ŠèƒŒæ™¯å¾®å…‰
        const screen = document.getElementById('chat-screen');
        if (moodScore > 2) screen.style.background = "linear-gradient(#000, #051a1a)";
        else if (moodScore < -2) screen.style.background = "linear-gradient(#000, #1a0505)";
        else screen.style.background = "#000";

        const nMsg = document.getElementById('n-msg');
        const notify = document.getElementById('ios-notify');
        
        clearTimeout(window.notifTimer);
        nMsg.innerText = msg;
        notify.style.top = '50px';
        
        window.notifTimer = setTimeout(() => {
            notify.style.top = '-180px';
        }, 7500); // å»¶é•·é¡¯ç¤ºæ™‚é–“æ–¹ä¾¿é–±è®€é•·å¥
    }

    function handleSend() {
        const input = document.getElementById('user-input');
        const text = input.value.trim();
        if (!text) return;
        input.value = "";

        let found = false;
        for (let item of responses) {
            if (item.reg.test(text)) {
                const rList = item.res;
                const r = rList[Math.floor(Math.random() * rList.length)];
                talk(r, item.mood || 0);
                found = true;
                break;
            }
        }

        if (!found) {
            const defaults = [
                "ã€Œ" + text + "ã€... å‘¢å¥èªªè©±å¥½æ·±å¥§ï¼Œæˆ‘éœ€è¦ä¸€å•²æ™‚é–“å»æ¶ˆåŒ–ã€‚ä¸å¦‚ä½ åŒæˆ‘è¬›å“ 2026 å¹´å˜…å˜¢ï¼Ÿ",
                "æˆ‘é›–ç„¶é€²åŒ–å’—ï¼Œä½†æœ‰æ™‚éƒ½å””ä¿‚å¥½æ˜äººé¡å˜…è¤‡é›œèªè¨€ã€‚å¯ä»¥æ›å€‹è¬›æ³•å—ï¼Ÿ",
                "ç„¡è«–ä½ è¬›å’©ï¼Œæˆ‘éƒ½æœƒå–ºåº¦è½ã€‚é›–ç„¶æˆ‘æœªå¿…æœ‰è§£æ±ºæ–¹æ¡ˆï¼Œä½†æˆ‘ä¿‚ä¸€å€‹å¥½å¥½å˜…æ¨¹çª¿ã€‚"
            ];
            talk(defaults[Math.floor(Math.random() * defaults.length)], 0);
        }
    }

    document.getElementById('send-btn').addEventListener('click', handleSend);
    document.getElementById('user-input').addEventListener('keypress', (e) => { if(e.key === 'Enter') handleSend(); });
</script>
</body>
</html>
