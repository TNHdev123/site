<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SaverLoop</title>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: black;
            overflow: hidden;
            color: white;
            font-family: sans-serif;
            font-size: 1em;
            text-align: center;
        }
        #message-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
        }
        #message {
            margin-bottom: 20px;
        }
        #version {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.8em;
            z-index: 10;
        }
    </style>
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
</head>
<body>
    <div id="message-container">
        <div id="message">Tap the screen to start</div>
    </div>
    <div id="version">version: Internal_α0.1</div>
    <video id="myVideo" src="https://archive.org/download/iphone_portrait_202402/iPad_Portrait.m4v" playsinline loop></video>

    <script>
        const videoElement = document.getElementById('myVideo');
        const messageContainer = document.getElementById('message-container');
        const messageElement = document.getElementById('message');
        const redirectUrl = "https://www.apple.com";
        let isPlaying = false;

        // 啟動影片和全螢幕模式
        function startVideo() {
            if (isPlaying) return;
            isPlaying = true;
            
            messageContainer.style.display = 'none';

            videoElement.play().then(() => {
                if (videoElement.requestFullscreen) {
                    videoElement.requestFullscreen();
                } else if (videoElement.webkitEnterFullscreen) {
                    videoElement.webkitEnterFullscreen();
                }
            }).catch(e => {
                console.error("影片播放失敗: ", e);
                messageContainer.style.display = 'block';
                messageElement.textContent = "播放失敗，請再試一次。";
                isPlaying = false;
            });
        }

        // 處理點擊事件
        document.body.addEventListener('click', () => {
            if (!isPlaying) {
                startVideo();
            } else {
                videoElement.pause();
            }
        });

        // 監聽影片暫停事件並導向
        videoElement.addEventListener('pause', () => {
            if (isPlaying && redirectUrl) { // 確保只有在播放狀態下暫停才導向
                window.location.href = redirectUrl;
            }
        });

    </script>
</body>
</html>
