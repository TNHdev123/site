<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Safari Liquid Interface Final</title>
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.9);
            --inner: rgba(0, 0, 0, 0.05);
            --accent: #007AFF;
            --fluid-ease: cubic-bezier(0.4, 0, 0.2, 1);
        }

        body {
            margin: 0; background: #000; height: 300vh;
            font-family: -apple-system, system-ui; overflow-x: hidden;
        }

        .safari-wrapper {
            position: fixed; bottom: 50px; left: 0; width: 100%;
            display: flex; justify-content: center; align-items: center;
            z-index: 9999;
        }

        /* çµ±ä¸€é«˜åº¦çš„å®¹å™¨ï¼Œé˜²æ­¢ä¸Šä¸‹éŒ¯ä½ */
        .liquid-pill {
            position: relative;
            width: 340px; height: 100px; /* å›ºå®šå¤§å®¹å™¨é«˜åº¦ */
            transition: all 0.5s var(--fluid-ease);
            display: flex; align-items: center; justify-content: center;
        }

        /* æ¯é«”èƒŒæ™¯è† å›Š */
        .main-bg {
            position: absolute;
            width: 100%; height: 100%;
            background: var(--glass);
            backdrop-filter: blur(30px); -webkit-backdrop-filter: blur(30px);
            border-radius: 35px;
            box-shadow: 0 15px 45px rgba(0,0,0,0.4);
            transition: all 0.5s var(--fluid-ease);
            z-index: 1;
        }

        /* å·¦å´å€å¡Š (Logo & ç¶²å€) */
        .left-zone {
            position: absolute;
            width: 310px; height: 44px;
            top: 10px; /* ä¸€èˆ¬ç‹€æ…‹ä¸‹çš„é«˜åº¦ */
            background: var(--inner);
            border-radius: 22px;
            display: flex; align-items: center; justify-content: center;
            transition: all 0.5s var(--fluid-ease);
            z-index: 2;
            gap: 8px;
            overflow: hidden;
        }

        .left-zone span { color: #000; font-weight: 500; font-size: 15px; transition: 0.3s; }

        /* å³å´å€å¡Š (æŒ‰éˆ•åˆ—) */
        .right-zone {
            position: absolute;
            width: 310px; height: 40px;
            bottom: 6px; /* ä¸€èˆ¬ç‹€æ…‹ä¸‹çš„é«˜åº¦ */
            display: flex; justify-content: space-around; align-items: center;
            transition: all 0.5s var(--fluid-ease);
            z-index: 2;
        }

        .icon { 
            color: var(--accent); font-size: 22px; cursor: pointer; 
            transition: all 0.5s var(--fluid-ease);
        }

        /* ================= ç‹€æ…‹è½‰æ› ================= */

        /* 1. ç°¡åŒ–ç‹€æ…‹ (Simplified) - åˆ†è£‚ */
        .state-simplified .main-bg {
            opacity: 0; transform: scale(0.8);
        }

        /* å·¦å€å¡Šç§»å‹•ï¼šå¾ä¸Šæ–¹ä¸­å¿ƒç§»åˆ°å·¦å´ä¸­å¿ƒ */
        .state-simplified .left-zone {
            width: 54px; height: 54px;
            background: var(--glass);
            border-radius: 50%;
            top: 23px; /* èª¿æ•´è‡³èˆ‡å³å€å¡Šæ°´å¹³å±…ä¸­ */
            transform: translateX(-120px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            backdrop-filter: blur(30px);
        }
        .state-simplified .left-zone span { opacity: 0; width: 0; }

        /* å³å€å¡Šç§»å‹•ï¼šå¾ä¸‹æ–¹ä¸­å¿ƒç§»åˆ°å³å´ä¸­å¿ƒ */
        .state-simplified .right-zone {
            width: 220px; height: 54px;
            background: var(--glass);
            border-radius: 27px;
            bottom: 23px; /* èˆ‡å·¦å€å¡Šä¿æŒåŒä¸€æ°´å¹³ç·š */
            transform: translateX(35px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            backdrop-filter: blur(30px);
            padding: 0 10px;
        }

        /* 2. ç¸®å°ç‹€æ…‹ (Compact) - å‡èš */
        .state-compact .main-bg {
            width: 140px; height: 44px; border-radius: 22px;
        }
        .state-compact .left-zone {
            width: 140px; height: 44px; top: 28px; background: transparent;
        }
        .state-compact .left-zone img { display: none; }
        .state-compact .left-zone span { font-size: 14px; font-weight: 600; }
        .state-compact .right-zone { 
            opacity: 0; transform: scale(0.5); pointer-events: none;
        }

        #hint {
            position: fixed; top: 30px; color: #888; width: 100%; text-align: center;
            font-size: 13px; line-height: 1.6;
        }
    </style>
</head>
<body>

    <div id="hint">
        <b>[ æ¶²æ…‹ç»ç’ƒå®Œç¾ç‰ˆæ¸¬è©¦ ]</b><br>
        å‘å³æ»‘å‹•åº•æ¬„ â” <b>åˆ†è£‚ç°¡åŒ–</b> (æ°´å¹³å°é½Šç„¡éŒ¯ä½)<br>
        å‘ä¸Šæ»‘å‹•ç¶²é  â” <b>å‡èšç¸®å°</b> (äº”éµæ¶ˆå¤±å›æ­¸ä¸­å¿ƒ)<br>
        äº”å€‹åŠŸèƒ½æŒ‰éˆ•ï¼šå¾Œé€€ã€å‰é€²ã€åˆ†äº«ã€æ›¸ç±¤ã€åˆ†é 
    </div>

    <div class="safari-wrapper" id="root">
        <div class="liquid-pill" id="pill">
            <div class="main-bg"></div>

            <div class="left-zone">
                <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" width="18">
                <span>apple.com</span>
            </div>

            <div class="right-zone">
                <div class="icon">ï¼œ</div>
                <div class="icon">ï¼</div>
                <div class="icon">â‡ª</div>
                <div class="icon">ğŸ“–</div>
                <div class="icon">â</div>
            </div>
        </div>
    </div>

    <script>
        const root = document.getElementById('root');
        let startX = 0;
        let currentState = 'normal';
        let prevState = 'normal';

        // æ»¾å‹•åµæ¸¬
        window.addEventListener('scroll', () => {
            if (window.scrollY > 50) {
                if (currentState !== 'compact') {
                    prevState = currentState;
                    currentState = 'compact';
                    root.className = 'safari-wrapper state-compact';
                }
            } else {
                if (currentState === 'compact') {
                    currentState = prevState;
                    root.className = 'safari-wrapper' + (currentState === 'simplified' ? ' state-simplified' : '');
                }
            }
        });

        // æ»‘å‹•åµæ¸¬ (æ ¸å¿ƒ)
        document.getElementById('pill').addEventListener('touchstart', e => startX = e.touches[0].clientX);
        document.getElementById('pill').addEventListener('touchend', e => {
            const diff = e.changedTouches[0].clientX - startX;
            if (diff > 40 && currentState === 'normal') {
                currentState = 'simplified';
                root.className = 'safari-wrapper state-simplified';
            } else if (diff < -40 && currentState === 'simplified') {
                currentState = 'normal';
                root.className = 'safari-wrapper';
            }
        });
        
        // é›»è…¦ç‰ˆæ¨¡æ“¬
        document.getElementById('pill').addEventListener('mousedown', e => startX = e.clientX);
        document.getElementById('pill').addEventListener('mouseup', e => {
            const diff = e.clientX - startX;
            if (diff > 40 && currentState === 'normal') {
                currentState = 'simplified';
                root.className = 'safari-wrapper state-simplified';
            } else if (diff < -40 && currentState === 'simplified') {
                currentState = 'normal';
                root.className = 'safari-wrapper';
            }
        });
    </script>
</body>
</html>
